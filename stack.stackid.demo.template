{
  "AWSTemplateFormatVersion" : "2010-09-09",

  "Description" : "Master template for creation of DEV Environment STACKID DEMO stack - filename: stack.stackid.demo.template",

 "Parameters" : {
    "appEnvironment" : {
      "Type" : "String",
      "Description" : "Environment for the stack, i.e. dev, production, etc.",
      "Default" : "sandbox"
    },

    "KeyName" : {
      "Type" : "String",
      "Description" : "The the key to SSH machines",
      "Default" : "stamp-sandbox"
    },

    "StackID" : {
      "Type" : "String",
      "Description" : "Stack ID name",
      "Default" : "-demo"
    },

    "InstanceType" : {
      "Description" : "Instance type for API",
      "Type" : "String",
      "Default" : "t1.micro",
      "AllowedValues" : [ "t1.micro","m1.small","m3.medium","m1.large","m1.xlarge","m2.xlarge","m2.2xlarge","m2.4xlarge","m3.xlarge","m3.2xlarge","c1.medium","c1.xlarge","cc1.4xlarge","cc2.8xlarge","cg1.4xlarge"],
      "ConstraintDescription" : "must be a valid EC2 instance type."
    },

    "ApiSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for api",
<<<<<<< HEAD
      "Default" : "sg-22662d47"
=======
      "Default" : "sg-9558e3f0"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "PrivateSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Private network",
<<<<<<< HEAD
      "Default" : "sg-2e662d4b"
=======
      "Default" : "sg-8f58e3ea"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "MonitorsSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Monitors",
<<<<<<< HEAD
      "Default" : "sg-2a662d4f"
=======
      "Default" : "sg-9458e3f1"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "LogstashSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Logstash",
<<<<<<< HEAD
      "Default" : "sg-2f662d4a"
=======
      "Default" : "sg-8958e3ec"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsISSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts Iceland",
<<<<<<< HEAD
      "Default" : "sg-37662d52"
=======
      "Default" : "sg-8e58e3eb"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsMXSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts Mexico",
<<<<<<< HEAD
      "Default" : "sg-35662d50"
=======
      "Default" : "sg-9158e3f4"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsSVSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts El Salvador",
<<<<<<< HEAD
      "Default" : "sg-52662d37"
=======
      "Default" : "sg-8458e3e1"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsGTSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts Guatemala",
<<<<<<< HEAD
      "Default" : "sg-29662d4c"
=======
      "Default" : "sg-9758e3f2"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsDOSecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts Dominican Republic",
<<<<<<< HEAD
      "Default" : "sg-2b662d4e"
=======
      "Default" : "sg-9658e3f3"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsNISecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts Nicaragua",
<<<<<<< HEAD
      "Default" : "sg-23662d46"
=======
      "Default" : "sg-9058e3f5"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "AccountsPASecurityGroup" : {
      "Type" : "String",
      "Description" : "Security Group ID for Accounts Panama",
<<<<<<< HEAD
      "Default" : "sg-28662d4d"
=======
      "Default" : "sg-8a58e3ef"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "PublicSubnetId" : {
      "Type" : "String",
      "Description" : "Subnet id that the api belongs",
<<<<<<< HEAD
      "Default" : "subnet-6a777f42"
=======
      "Default" : "subnet-ba40a8cd"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "PrivateSubnetId" : {
      "Type" : "String",
      "Description" : "Subnet id that the api belongs",
<<<<<<< HEAD
      "Default" : "subnet-6c777f44"
=======
      "Default" : "subnet-a340a8d4"
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "gtSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-62777f4a",
=======
      "Default" : "subnet-b840a8cf",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for GT worker"
    },

    "doSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-6e777f46",
=======
      "Default" : "subnet-b940a8ce",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for DO worker"
    },

    "mxSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-6f777f47",
=======
      "Default" : "subnet-a740a8d0",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for MX worker"
    },

    "svSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-6b777f43",
=======
      "Default" : "subnet-a540a8d2",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for SV worker"
    },

    "niSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-61777f49",
=======
      "Default" : "subnet-a440a8d3",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for NI worker"
    },

    "paSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-60777f48",
=======
      "Default" : "subnet-a640a8d1",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for PA worker"
    },

    "isSubnetID" : {
      "Type" : "String",
<<<<<<< HEAD
      "Default" : "subnet-61777f49",
=======
      "Default" : "subnet-bb40a8cc",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
      "Description" : "Subnet ID for IS worker"
    }
  },

  "Resources" : {

    "API" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/api.template",
        "Parameters" : {
          "KeyName": {"Ref":"KeyName"},
          "SubnetId" : { "Ref" : "PublicSubnetId"},
          "SecurityGroupId" : { "Ref" : "ApiSecurityGroup"},
<<<<<<< HEAD
          "DeployBranch" : "release/0.6.0",
=======
          "DeployBranch" : "release/0.8.0",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
          "StackID" : { "Ref" : "StackID" },
          "InstanceType" : { "Ref" : "InstanceType"},
          "Environment" : {"Ref" : "appEnvironment"}
        }
      }
    },

<<<<<<< HEAD
    "HelloWorld" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/hello-world.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
=======
    "redis" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/redis.template",
        "Parameters" : {
          "KeyName": { "Ref" : "KeyName" },
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
          "SubnetId" : { "Ref" : "PrivateSubnetId" },
          "SecurityGroupId" : { "Ref" : "PrivateSecurityGroup" },
          "DeployBranch" : "master",
          "StackID" : { "Ref" : "StackID" },
<<<<<<< HEAD
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
=======
          "InstanceType" : { "Ref" : "InstanceType"},
          "Environment": { "Ref" : "appEnvironment" }
        }
      } 
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    },

    "catalog" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/catalog.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "PrivateSubnetId" },
          "SecurityGroupId" : { "Ref" : "PrivateSecurityGroup" },
<<<<<<< HEAD
          "DeployBranch" : "release/0.6.0",
=======
          "DeployBranch" : "master",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    }, 

    "accountsIs" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/accounts.is.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "isSubnetID" },
          "SecurityGroupId" : { "Ref" : "AccountsISSecurityGroup" },
          "DeployBranch" : "master",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

    "accountsGt" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/accounts.gt.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "gtSubnetID" },
          "SecurityGroupId" : { "Ref" : "AccountsGTSecurityGroup" },
<<<<<<< HEAD
          "DeployBranch" : "release/0.6.0",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

    "accountsDo" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/accounts.do.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "doSubnetID" },
          "SecurityGroupId" : { "Ref" : "AccountsDOSecurityGroup" },
          "DeployBranch" : "release/0.6.0",
=======
          "DeployBranch" : "master",
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

    "monitors" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/monitors.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "PrivateSubnetId" },
          "SecurityGroupId" : { "Ref" : "PrivateSecurityGroup" },
          "DeployBranch" : "master",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },  

    "InternalGateway" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/internal_gateway_lp103.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "PrivateSubnetId" },
          "SecurityGroupId" : { "Ref" : "PrivateSecurityGroup" },
          "DeployBranch" : "release/0.7.0",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

    "Events" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/events.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "PrivateSubnetId" },
          "SecurityGroupId" : { "Ref" : "PrivateSecurityGroup" },
          "DeployBranch" : "master",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

    "GTWorkerPronet" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/gt_worker_pronet.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "gtSubnetID" },
          "SecurityGroupId" : { "Ref" : "AccountsGTSecurityGroup" },
          "DeployBranch" : "master",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

<<<<<<< HEAD
    "MXWorkerRedEfectiva" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/mx_worker_redefectiva.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "mxSubnetID" },
          "SecurityGroupId" : { "Ref" : "AccountsMXSecurityGroup" },
          "DeployBranch" : "release/0.6.0",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    },

=======
>>>>>>> db604629226b0a41ebdb574e1fcd62dfcf528334
    "Payments" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/payments.template",
        "Parameters" : {
          "KeyName" : { "Ref" : "KeyName" },
          "SubnetId" : { "Ref" : "PrivateSubnetId" },
          "SecurityGroupId" : { "Ref" : "PrivateSecurityGroup" },
          "DeployBranch" : "master",
          "StackID" : { "Ref" : "StackID" },
          "Environment" : { "Ref" : "appEnvironment" }
        }
      }
    }
  }
}

