{
  "AWSTemplateFormatVersion" : "2010-09-09",

  "Description" : "Super template, it shuld start up Instance A and Instance B",

  "Resources" : {

    "VPC" : {
      "Type" : "AWS::EC2::VPC",
      "Properties" : {
        "CidrBlock" : "10.35.0.0/16",
        "Tags" : 
        [ 
          {
            "Key" : "Application", 
            "Value" : { "Ref" : "AWS::StackId"}
          },
          {
            "Key" : "Environment", 
            "Value" : "QA" 
          }

        ]
      }
    },

    "SecurityG" : {
      "Type" : "AWS::EC2::SecurityGroup",
      "Properties" : {
        "GroupDescription": "test NPI group",
        "SecurityGroupIngress" : [{
          "IpProtocol" : "tcp",
          "FromPort" : "22" ,
          "ToPort" : "22",
          "CidrIp" : "0.0.0.0/0"
          }],
        "VpcId" : {"Ref" : "VPC"}
      }
    },

    "Subnet" : {
      "Type" : "AWS::EC2::Subnet",
      "Properties" : {
        "VpcId" : { "Ref" : "VPC" },
        "CidrBlock" : "10.35.0.0/24",
        "Tags" : [ 
          {
            "Key" : "Application", 
            "Value" : { "Ref" : "AWS::StackId"} 
          },
          {
            "Key" : "Environment", 
            "Value" : "QA" 
          }
        ]
      }
    },

    "Instance1" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3-us-west-2.amazonaws.com/pruebastack/a.json",
        "Parameters" : {
          "SubnetVpc" : { "Ref" : "Subnet"},
          "SG" : { "Ref" : "SecurityG"}
        }
      }
    },

    "Instance2" : {
      "Type" : "AWS::CloudFormation::Stack",
      "Properties" : {
        "TemplateURL" : "https://s3.amazonaws.com/pruebastack/b.json",
        "Parameters" : {
          "SubnetVpc" : { "Ref" : "Subnet"},
          "SG" : { "Ref" : "SecurityG"}
        }
      }
    }
  }

}